/*Exercise1- Read all file names from directory and place in a specified SAS library*/

libname outp '/home/u38072055/out1';               /*Output directory*/

%macro ReadFiles(directory);                       /*Define Macro - ReadFiles*/
data outp.file_list(keep=fname);  
	rc=filename("mydir","&directory");            /*Input directory*/
	did=dopen("mydir");                            /*Directory ID*/
	if did>0 then
		do i=1 to dnum(did);                       /*Loops from 1 to the number of items in directory*/
			fname=dread(did,i);                    /* Reads the name of the directory member*/
			output;
		end;
	rc=dclose(did);                                /*Closes the directory*/
run;

proc print data=outp.file_list;                    /* Prints SAS dataset to directory OUTP*/
run;
%mend ReadFiles;

%ReadFiles(/home/u38072055/Pavani);                /* Call the Macro with directory path*/
